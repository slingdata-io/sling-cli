steps:
  - type: log
    message: '{runtime_state}'
  
  - type: store
    key: key1
    value: value-from-pipeline

  - type: replication
    path: cmd/sling/tests/replications/r.19.yaml
    env:
      RESET: 'true'

  - replication: file://cmd/sling/tests/replications/r.19.yaml

  - replication: 
      source: postgres
      target: aws_s3
      streams:
        public.test1k_postgres_pg_parquet:
          object: test/test1k_postgres_pg_parquet.parquet
        
  - type: log
    message: '{runtime_state}'
    level: warn
        
  - type: log
    message: 'key2 => {store.key2}'

  - type: command
    command: [ls, -l]
    print: true
  
  - type: delete
    location: aws_s3/test/test1k_postgres_pg_parquet.parquet