# ADBC (Arrow Database Connectivity) Template
# This is a generic template for ADBC connections
# The actual SQL syntax depends on the underlying database driver

core:
  drop_table: drop table if exists {table}
  drop_view: drop view if exists {view}
  create_table: create table if not exists {table} ({col_types})
  create_index: create index if not exists {index} on {table} ({cols})
  insert: insert into {table} ({cols}) values ({values})
  sample: select {fields} from {table} limit {n}
  rename_table: ALTER TABLE {table} RENAME TO {new_table}

metadata:
  current_database: select current_database()
  databases: select datname as name from pg_database where datistemplate = false
  schemas: |
    select schema_name
    from information_schema.schemata
    order by schema_name
  tables: |
    select table_name
    from information_schema.tables
    where table_schema = '{schema}'
    order by table_name
  columns: |
    select column_name, data_type
    from information_schema.columns
    where table_schema = '{schema}' and table_name = '{table}'
    order by ordinal_position
  schemata: |
    select
      table_schema as schema_name,
      table_name,
      column_name,
      data_type,
      coalesce(numeric_precision, 0) as precision,
      coalesce(numeric_scale, 0) as scale,
      ordinal_position as position
    from information_schema.columns
    where table_schema = '{schema}'
    order by table_schema, table_name, ordinal_position

variable:
  tmp_folder: /tmp
  timestamp_layout_str: '{value}'
  timestamp_layout: '2006-01-02 15:04:05.000000'
  date_layout_str: '{value}'
  date_layout: '2006-01-02 15:04:05'
  bool_as: 'bool'
  quote_char: '"'

general_type_map:
  bool: bool
  int: integer
  bigint: bigint
  float: double precision
  string: text
  text: text
  json: json
  timestamp: timestamp
  datetime: timestamp
  date: date
  time: time
  binary: bytea
  uuid: uuid
  decimal: numeric

native_type_map:
  bool: bool
  boolean: bool
  int: integer
  int2: integer
  int4: integer
  int8: bigint
  smallint: integer
  bigint: bigint
  integer: integer
  float: float
  float4: float
  float8: float
  real: float
  double precision: float
  double: float
  numeric: decimal
  decimal: decimal
  money: decimal
  varchar: string
  character varying: string
  text: string
  char: string
  character: string
  uuid: string
  timestamp: timestamp
  timestamp with time zone: timestamp
  timestamp without time zone: timestamp
  timestamptz: timestamp
  datetime: datetime
  date: date
  time: time
  time with time zone: time
  time without time zone: time
  timetz: time
  bytea: binary
  blob: binary
  json: json
  jsonb: json
